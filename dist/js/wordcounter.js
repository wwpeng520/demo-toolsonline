$(function(){var a;var b;var c;var d=0;$("#wordsTxtAra").hover(function(){return $(this).select()});$("#wordsTxtAra").mouseup(change).keyup(change);$("#countWordsBtn").click(function(){a=$("#wordsTxtAra").val();wordFreqOut(a)})});function change(){textenter=$("#wordsTxtAra").val();$("#numZh").text(zhCount(textenter));$("#numZhChars").text(zhCharsCount(textenter));$("#numWord").text(wordCount(textenter));$("#numEnChars").text(enCharsCount(textenter))}function wordFreqOut(a){var b=$('#wordFreqTable tbody').children().length;var c,td1,td2;var d;var e=document.getElementsByTagName("tr");d=freqNum(a);if(b===1){for(var i in d){$("#wordFreqTable").show();c=document.createElement("tr");td1=document.createElement("td");td2=document.createElement("td");td1.innerHTML=d[i][0];td2.innerHTML=d[i][1];c.appendChild(td1);c.appendChild(td2);$("#wordFreqTable").append(c)}}else{$("#wordFreqTable tr:not(:eq(0))").remove();for(var j in d){c=document.createElement("tr");td1=document.createElement("td");td2=document.createElement("td");td1.innerHTML=d[j][0];td2.innerHTML=d[j][1];c.appendChild(td1);c.appendChild(td2);$("#wordFreqTable").append(c)}}}function zhCount(a){reg=/[^\u4e00-\u9fa5]/g;temp=a.replace(reg,"");return temp.length}function zhCharsCount(a){reg=/[^\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b\u3008\u3009\uff01\u2013\u2014\u2026]/g;temp=a.replace(reg,"");return temp.length}function enCharsCount(a){reg=/[^\u0020-\u002f\u003a-\u0040\u005b-\u0060\u007b-\u007e]/g;temp=a.replace(reg,"");return temp.length}function getWordsByWordBoundaries(a){reg=/[^\u0027\u0061-\u007a\u0041-\u005a]/g;temp=a.replace(reg," ").replace(/\s+/g," ").toLowerCase().split(" ");temp=temp.filter(function(n){return n});return temp}function wordCount(a){return getWordsByWordBoundaries(a).length}function sortFreqNnm(c){let sortable=[];for(let key in c){sortable.push([key,c[key]])}sortable.sort(function(a,b){return b[1]-a[1]});return sortable}function freqNum(a){var b={};var c=getWordsByWordBoundaries(a);for(var i=0;i<c.length;i++){var d=c[i];if(b[d]){b[d]++}else{b[d]=1}}return sortFreqNnm(b)}