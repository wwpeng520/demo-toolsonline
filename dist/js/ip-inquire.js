$(function(){$.ajax({url:"https://api.map.baidu.com/location/ip?ak=QYXX0FZjMfaBwyF12fLCjYDwb4FgV1qD&coor=bd09ll",type:"get",dataType:"jsonp",success:function(a){var b=a.address.split("|");$("#tab_addr").text(b[0]+", "+b[1]+", "+b[2]);$("#tab_longitude").text(a.content.point.x);$("#tab_latitude").text(a.content.point.y)},error:function(a,c,b){console.log("error "+c+" "+b)}});$.ajax({url:"/userinfo/getClientInfo",type:"get",dataType:"json",success:function(a){$("#tab_ip").text(a[2])},error:function(a,c,b){console.log("error "+c+" "+b)}});$("#getIpInfo").click(function(){var c=$("#ipEnter").val();var b="https://api.map.baidu.com/location/ip?ak=QYXX0FZjMfaBwyF12fLCjYDwb4FgV1qD&ip="+c+"&coor=bd09ll";var a=/^(1\d{2,2}|2[0-4][0-9]|25[0-5]|[1-9][0-9]|[1-9])(\.(1\d{2,2}|2[0-4][0-9]|25[0-5]|[1-9][0-9]|[0-9])){3,3}$/;if(c&&c.match(a)){c=c.match(a)[0];$.ajax({url:b,type:"get",dataType:"jsonp",success:function(d){if(d.status===0){var e=d.address.split("|");$("#tabHeader").text("您输入的IP信息：");$("#tab_ip").text(c);$("#tab_addr").text(e[0]+", "+e[1]+", "+e[2]);$("#tab_longitude").text(d.content.point.x);$("#tab_latitude").text(d.content.point.y)}else{$("#tabHeader").text("错误信息："+d.message);$("#tab_ip").text(c);$("#tab_addr").text("");$("#tab_longitude").text("");$("#tab_latitude").text("")}},error:function(d,f,e){console.log("error "+f+" "+e)}})}else{$("#tabHeader").text("请输入要正确的IP地址！")}})});